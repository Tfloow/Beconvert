# GitHub Actions workflow to build and run the Python web app
name: Build and Run Web App

on:
	push:
		branches: [master, main]
	pull_request:
		branches: [master, main]

jobs:
	build:
		runs-on: ubuntu-latest
		steps:
			- name: Checkout code
				uses: actions/checkout@v4

			- name: Set up Python
				uses: actions/setup-python@v5
				with:
					python-version: '3.11'

			- name: Install dependencies
				run: |
					python -m pip install --upgrade pip
					pip install -r requirements.txt

			# Uncomment the following if you have tests to run
			# - name: Run tests
			#   run: |
			#     pytest

			- name: Run web app (for CI, not for deployment)
				run: |
					python app.py &
					sleep 10
					curl -I http://localhost:5000 || true
				env:
					FLASK_ENV: development
# Run the web app
